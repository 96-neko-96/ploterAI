# Story Generator 使用方法

このドキュメントでは、Story Generatorの詳細な使用方法を説明します。

## 目次

1. [初回起動とセットアップ](#初回起動とセットアップ)
2. [プロジェクト管理](#プロジェクト管理)
3. [キャラクター管理](#キャラクター管理)
4. [世界観設定](#世界観設定)
5. [物語生成](#物語生成)
6. [エクスポート](#エクスポート)
7. [設定](#設定)

## 初回起動とセットアップ

### 1. アプリケーションの起動

```bash
python app/main.py
```

### 2. API設定

初回起動時、Gemini APIキーの設定が必要です。

1. トップメニューから「API設定」をクリック
2. APIキーを入力
3. モデルを選択（デフォルト: gemini-2.0-flash-exp）
4. 必要に応じてパラメータを調整:
   - Temperature: 0.0-1.0（高いほど創造的）
   - Max Tokens: 1000-8000（生成する最大トークン数）
   - Top P: 0.0-1.0（サンプリング範囲）
5. 「接続テスト」で動作確認
6. 「保存」をクリック

APIキーの取得方法は[API_SETUP.md](API_SETUP.md)を参照してください。

### 3. テーマ設定

お好みのUIテーマを選択できます。

1. 「テーマ設定」をクリック
2. カラーモード: light / dark
3. カラーテーマ: blue / green / dark-blue
4. 変更は即座にプレビュー表示されます
5. 「保存」で確定

## プロジェクト管理

### 新規プロジェクトの作成

1. 「新規プロジェクト」をクリック
2. プロジェクト名を入力
3. 保存先を選択（.json形式）
4. 「作成」をクリック

### プロジェクトを開く

1. 「プロジェクトを開く」をクリック
2. .jsonファイルを選択
3. プロジェクトデータが読み込まれます

### 保存

- **保存**: 現在のプロジェクトを上書き保存
- **名前を付けて保存**: 別名で保存

変更は自動的にプロジェクトに反映されますが、定期的に「保存」を実行してください。

## キャラクター管理

### 手動でキャラクターを作成

1. 左パネルの「キャラクター」タブを選択
2. 「新規作成」をクリック
3. 以下の項目を入力:
   - **名前**（必須）: キャラクターの名前
   - **性格**: 主な性格特性、価値観
   - **外見**: 身長、体格、髪型、服装など
   - **背景・経歴**: 生い立ち、過去の出来事
   - **特技・能力**: 得意なこと、特殊な能力
   - **口調・話し方**: セリフの特徴
   - **人間関係**: 家族、友人、ライバル
   - **目標・動機**: 何を目指しているか
4. 「保存」をクリック

### AIでキャラクターを生成

1. 「AI生成」をクリック
2. コンセプトを入力（例: 「勇敢な騎士」）
3. 追加情報を入力（任意）
4. 「生成」をクリック
5. 生成されたキャラクター情報を確認
6. 必要に応じて編集
7. 「保存」をクリック

### キャラクターの編集・削除

1. リストからキャラクターを選択
2. **編集**: 「編集」をクリックして内容を変更
3. **削除**: 「削除」をクリック（確認ダイアログが表示されます）

## 世界観設定

### 手動で世界観を作成

1. 左パネルの「世界観」タブを選択
2. 「手動作成」をクリック
3. 以下の項目を入力:
   - **世界観名**: この世界の名称
   - **時代設定**: いつの時代か
   - **概要・説明**: 世界全体の概要
   - **地理・環境**: 地形、気候、主要な場所
   - **社会体制**: 政治体制、経済システム
   - **特殊ルール**: 魔法、科学技術など
   - **文化・習慣**: 宗教、祭り、慣習
   - **歴史・背景**: 重要な歴史的出来事
4. 「保存」をクリック

### AIで世界観を生成

1. 「AI生成」をクリック
2. ジャンルを入力（例: 「ファンタジー」）
3. キーワードを入力（例: 「魔法、ドラゴン、中世」）
4. 「生成」をクリック
5. 生成された世界観を確認
6. 必要に応じて編集
7. 「保存」をクリック

## 物語生成

### 基本的な流れ

1. **シーン情報を入力**
2. **プロット生成**（500-1000文字）
3. **中編化**（2000-3000文字）
4. **長編化**（5000文字以上）
5. **シーン保存**

### ステップ1: シーン情報を入力

右パネルで以下を入力:

- **シーンタイトル**: シーンの名前
- **シーン概要**: どんなシーンかの説明（100-300文字程度）
- **使用キャラクター**: ドロップダウンから選択

### ステップ2: 文体スタイルの設定

1. 「文体設定」をクリック
2. 以下を選択:
   - **視点**: 一人称 / 三人称 / 二人称
   - **語り口**: 過去形 / 現在形
   - **トーン**: シリアス / 標準 / コメディ / ダーク
   - **描写レベル**: 簡潔 / 中程度 / 詳細
   - **会話スタイル**: フォーマル / 標準 / カジュアル
3. 「保存」をクリック

### ステップ3: プロット生成

1. 「プロット生成」をクリック
2. 生成中のプログレスバーが表示されます
3. 500-1000文字の簡潔なプロットが生成されます
4. 結果は「生成結果」エリアに表示されます

### ステップ4: 中編化

1. プロットが生成されたら「中編化」をクリック
2. 2000-3000文字に拡張されます
3. 以下の要素が追加されます:
   - 詳細な情景描写
   - 感情描写
   - 会話・セリフ
   - 行動描写
   - 五感に訴える表現

### ステップ5: 長編化

1. 中編が生成されたら「長編化」をクリック
2. 5000文字以上に拡張されます
3. 以下の要素が追加されます:
   - 内面描写の深掘り
   - 会話の充実
   - 場面転換の描写
   - サブプロット
   - 伏線・細かな描写

### ステップ6: シーン保存

1. 生成結果に満足したら「シーン保存」をクリック
2. シーンがプロジェクトに保存されます
3. エクスポート時に使用できます

### ヒント

- **段階的に生成**: いきなり長編化せず、プロット→中編→長編と段階的に進めることで、より質の高い物語を生成できます
- **編集**: 生成結果は直接編集できます
- **複数回生成**: 気に入らない場合は、概要を変更して再生成してください
- **キャラクター設定の活用**: 詳細なキャラクター設定を用意すると、より個性的な物語が生成されます

## エクスポート

### エクスポートの実行

1. 「エクスポート」をクリック
2. ファイル形式を選択:
   - **txt**: プレーンテキスト
   - **markdown**: Markdown形式
   - **pdf**: PDF形式（日本語対応）
3. エクスポートするシーンを選択（複数選択可）
4. 含める内容を選択:
   - タイトル
   - キャラクター情報
   - 世界観設定
5. 「エクスポート」をクリック
6. 保存先を選択

### エクスポート形式の違い

#### TXT形式

- プレーンテキスト
- どのエディタでも開ける
- シンプルで読みやすい

#### Markdown形式

- 見出しやフォーマット付き
- GitHubやNotionで表示できる
- HTMLに変換可能

#### PDF形式

- プロフェッショナルな見た目
- 印刷に適している
- 日本語フォント対応
- 配布用に最適

## 設定

### API設定

- **APIキー**: Gemini APIのアクセスキー
- **モデル**: 使用するAIモデル
- **Temperature**: 創造性のレベル（0.0-1.0）
- **Max Tokens**: 最大生成トークン数
- **Top P**: サンプリング範囲

### テーマ設定

- **カラーモード**: light（明るい） / dark（暗い）
- **カラーテーマ**: blue / green / dark-blue

### 文体スタイル

物語ごとに設定できる文体のスタイル。プロジェクト全体のデフォルト設定として保存されます。

## トラブルシューティング

### 生成に時間がかかる

- ネットワーク接続を確認してください
- Max Tokensが大きすぎる場合は減らしてみてください
- APIのレート制限に達している可能性があります

### 生成結果が期待と異なる

- シーン概要をより詳細に記述してください
- キャラクター設定を充実させてください
- Temperatureを調整してください（高い=創造的、低い=安定）
- 複数回生成して、良い結果を選んでください

### PDFエクスポートエラー

- 日本語フォントがインストールされているか確認してください
- ファイル名に特殊文字が含まれていないか確認してください

### プロジェクトが開けない

- ファイルが破損している可能性があります
- バックアップファイル（.json.bak）から復元を試みてください

## ワークフロー例

### 短編小説の作成

1. 新規プロジェクト作成
2. 主人公キャラクターを作成（AI生成）
3. 世界観を設定（手動）
4. シーン1: 導入部分のプロット生成
5. シーン1: 中編化
6. シーン2-3: 同様に作成
7. 全シーンをエクスポート（PDF）

### 長編小説の準備

1. 新規プロジェクト作成
2. 主要キャラクター5名を作成
3. 詳細な世界観を設定
4. 各章のプロットを生成
5. プロットを確認・調整
6. 本格的な執筆へ

---

さらに質問がある場合は、README.mdやAPI_SETUP.mdも参照してください。
